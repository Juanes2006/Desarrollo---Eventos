{% extends 'base.html' %} {% block eventos_url %} {{ url_for('main.visitante') }} {% endblock %} {% block eventos_text %} InformaciÃ³n Participante {% endblock %} {% block content %}
<div class="container mt-4">
    <h2 class="text-center">ğŸ“„ Consultar Inscripciones en Eventos</h2>

    <form method="POST" class="mb-4">
        <div class="input-group">
            <input type="text" name="par_id" class="form-control" placeholder="Ingrese su ID de participante" required>
            <button type="submit" class="btn btn-primary">Consultar</button>
        </div>
    </form>

    {% if participante %}
    <div class="card shadow-sm">
        <div class="card-body">
            <h4 class="card-title">ğŸ‘¤ InformaciÃ³n Personal</h4>
            <p><strong>ID:</strong> {{ participante.par_id }}</p>
            <p><strong>Nombre:</strong> {{ participante.par_nombre }}</p>
            <p><strong>Correo:</strong> {{ participante.par_correo }}</p>
        </div>
    </div>

    <div class="mt-4">
        <h4>ğŸ“… Eventos en los que estÃ¡s inscrito</h4>
        {% if eventos_inscritos %}
        <ul class="list-group">
            {% for evento in eventos_inscritos %}
            <li class="list-group-item">
                <strong>ğŸ“Œ Evento:</strong> {{ evento.evento.eve_nombre }} <br>
                <strong>ğŸ“… Fecha de inicio:</strong> {{ evento.evento.eve_fecha_inicio }} <br>
                <strong>ğŸ“ Ciudad:</strong> {{ evento.evento.eve_ciudad }} <br>
                <strong>ğŸ“Œ Estado:</strong> {% if evento.par_estado == 'ACEPTADO' %}
                <span class="badge bg-success">âœ… Aceptado</span> {% elif evento.par_estado == 'PENDIENTE' %}
                <span class="badge bg-warning text-dark">â³ Pendiente</span> {% else %}
                <span class="badge bg-danger">âŒ Rechazado</span> {% endif %}
                <br> {% if evento.par_eve_documentos %}
                <strong>ğŸ“‚ Documento:</strong>
                <a href="{{ url_for('static', filename='uploads/' ~ evento.par_eve_documentos) }}" target="_blank">
                        ğŸ“„ Ver Documento
                    </a> {% else %}
                <p class="text-muted">No se han cargado documentos.</p>
                {% endif %}
                <br>

                <!-- Mostrar Puntaje y Ranking -->
                <strong>ğŸ† Puntaje Total:</strong> {% if evento.criterios and evento.criterios|length > 0 %} {{ (evento.puntaje_total / (evento.criterios|length))|round(2) }} {% else %} No disponible {% endif %}<br>
                <strong>ğŸ“ˆ PosiciÃ³n:</strong> {% if evento.posicion %} {% if evento.posicion == 1 %} ğŸ¥‡ {{ evento.posicion }}Â° lugar {% elif evento.posicion == 2 %} ğŸ¥ˆ {{ evento.posicion }}Â° lugar {% elif evento.posicion == 3 %} ğŸ¥‰ {{ evento.posicion
                }}Â° lugar {% else %} {{ evento.posicion }}Â° lugar {% endif %} {% else %} No disponible {% endif %}<br>

                <strong>ğŸ“‹ Instrumento de EvaluaciÃ³n:</strong><br> {% if evento.instrumento %}
                <p><strong>Tipo:</strong> {{ evento.instrumento.inst_tipo }}</p>
                <p><strong>DescripciÃ³n:</strong> {{ evento.instrumento.inst_descripcion }}</p>
                {% else %}
                <p class="text-muted">No hay instrumento registrado para este evento.</p>
                {% endif %} {% if evento.criterios %}

                <strong>ğŸ“Š Criterios:</strong><br>
                <ul>
                    {% for criterio in evento.criterios %}
                    <li>{{ criterio.cri_descripcion }} - {{criterio.cri_peso }}%</li>

                    {% endfor %}
                </ul>
                {% else %}
                <p class="text-muted">No hay criterios registrados para este evento.</p>
                {% endif %}

                <br>
                <a href="{{ url_for('participantes.ver_calificaciones_participante', participante_id=participante.par_id, evento_id=evento.evento.eve_id) }}" class="btn btn-warning mt-2">
                    Ver calificaciones
                </a>

                <a href="{{ url_for('participantes.modificar_participante', user_id=participante.par_id, evento_id=evento.evento.eve_id) }}" class="btn btn-warning mt-2">
                    Editar InformaciÃ³n
                </a>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-muted">No estÃ¡s inscrito en ningÃºn evento.</p>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}